"use strict";window.rrpc=function(){var e=null;var f={};var g=1;var h="2.0";var i=null;function a(){var a=g;g++;return a}function b(){if(e){e.close()}var a=f;f={};for(var b in a){a[b](null,new Error("WebSocket torn down"))}}function c(a){var b=JSON.parse(a.data);if(b.id in f){var c=f[b.id];delete f[b.id];c(b.result,b.error)}}function d(a,f,g){var h=window.location.protocol==="https:"?"wss://":"ws://";e=new WebSocket(h+g+window.location.pathname+"x/websocket/");if(i){e.onerror=f}e.onopen=function(){e.onmessage=c;e.onclose=function(c){b();d(a,function(a){if(a.error.code!=="ECONNREFUSED"){i(a.error)}},g)};if(a){a()}}}return{initialize:function initialize(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:window.location.host;b();i=c;d(a,c,e)},call:function call(b,c,d){var g=a();if(d){f[g]=d}e.send(JSON.stringify({jsonrpc:h,method:b,params:c,id:g}))},destroy:function destroy(a){b()}}}();
